function saveAnswer(n,t){var r=getCurrentSCId(),i="",u,f,e,o;t=="textbox"||t=="matchingTextbox"||t=="fillInTheBlanks"||t=="fileUpload"?i=$("#option_"+n).val():t=="radioButton"||t=="checkbox"||t=="pictureChoice"?i="'"+$("#option_"+n).prop("checked")+"'":t=="coding"&&(u=$("#codingTestLanguage_"+n).val(),f=ace.edit("option_"+n),i=u+" "+f.getValue()),e={scId:r,optionId:n,optionValue:i},o=$("head base").attr("href"),$.ajax({type:"POST",url:o+"/SC/SaveAnswer",data:e,cache:!1,success:function(){t=="pictureChoice"&&highlightSelectedPictureChoice(n),setProgressPercentage(r,null,n)},error:function(n){alert("error: "+n)}})}function saveAnswerFillInTheBlanksDisplay(n,t){saveAnswer(n,"fillInTheBlanks");var i=$("#option_"+n).val();$.trim(i)==""&&(i="<span style='color:#dddddd;'>__<\/span>"),$("#"+t).html(i+" "),$("#option_"+n).hide(),$("#"+t).show()}function highlightSelectedPictureChoice(n){var t=$("#option_"+n+" .optionsName").html();$("div."+t).hide(),$("#optionOverlay_"+n).show(),$("#optionPoint_"+n).show()}function mouseOverSelectedPictureChoice(n){$("#optionMouseOverOverlay_"+n).show(),$("#optionMouseOverPoint_"+n).show()}function mouseOutSelectedPictureChoice(n){$("#optionMouseOverOverlay_"+n).hide(),$("#optionMouseOverPoint_"+n).hide()}function deleteAllAnswers(n){var t=getCurrentSCId(),i={scId:t,questionId:n},r=$("head base").attr("href");$.ajax({type:"GET",url:r+"/SC/DeleteAllAnswers",data:i,cache:!1,success:function(){setProgressPercentage(t,n,null)},error:function(n){alert("error: "+n)}})}function saveDropDownListAnswer(n){var t=$("#options_"+n).val().replace("option_","");t=="- Select -"?deleteAllAnswers(n):saveAnswer(t,"dropdownlist")}function setPlanTypeDisplayed(n){n=="FREE"?($(".pfFree").removeClass("pfH"),$(".pfPremium").addClass("pfH"),$(".pfEnterprise").addClass("pfH"),$("#freePlanSelect").addClass("active"),$("#premiumPlanSelect").removeClass("active"),$("#enterprisePlanSelect").removeClass("active")):n=="PREMIUM"?($(".pfFree").addClass("pfH"),$(".pfPremium").removeClass("pfH"),$(".pfEnterprise").addClass("pfH"),$("#freePlanSelect").removeClass("active"),$("#premiumPlanSelect").addClass("active"),$("#enterprisePlanSelect").removeClass("active")):n=="ENTERPRISE"&&($(".pfFree").addClass("pfH"),$(".pfPremium").addClass("pfH"),$(".pfEnterprise").removeClass("pfH"),$("#freePlanSelect").removeClass("active"),$("#premiumPlanSelect").removeClass("active"),$("#enterprisePlanSelect").addClass("active"))}function setCodingLanguage(n,t){var i=$("head base").attr("href"),r=$("#codingTestLanguage_"+t).val(),u={questionId:n,codingLanguage:r};$.ajax({type:"POST",url:i+"/SC/GetCodingTemplate",data:u,error:function(n){alert("error: "+n)},success:function(n){$("#buildOutput_"+t).hide();var i=ace.edit("option_"+t);i.setValue(n,-1),saveAnswer(t,"coding")}})}function runCodingTests(n,t){var i=$("head base").attr("href");$("#runCodingTests_"+t).text("Running ...."),$("#runCodingTests_"+t).addClass("disabled"),$("#buildOutput_"+t).hide();var r=getCurrentSCId(),u=ace.edit("option_"+t),f=u.getValue(),e=$("#codingTestLanguage_"+t).val(),o={scId:r,questionId:n,optionValue:f,codingLanguage:e};$.ajax({type:"POST",url:i+"/SC/RunCodingTests",data:o,error:function(n){alert("error: "+n),$("#runCodingTests_"+t).text("Run code"),$("#runCodingTests_"+t).removeClass("disabled")},success:function(n){var i="<table class='codingResults'>",r,u;if((n.passedTestCases>0||n.failedTestCases>0)&&(i+="<tr class='codingResultsSection'><td><strong>Test cases:<\/strong><\/td><td>Passed - "+n.passedTestCases+", Failed - "+n.failedTestCases+"<\/td><\/tr>"),n.buildErrors!="")for(i+="<tr class='codingResultsSection'><td><strong>Errors:<\/strong><\/td>",i+="<td class='codingResultsOutput'>"+n.buildErrors[0]+"<\/td><\/tr>",r=1;r<n.buildErrors.length;r++)i+="<tr><td><\/td><td class='codingResultsOutput'>"+n.buildErrors[r]+"<\/td><\/tr>";if(n.buildWarnings!="")for(i+="<tr class='codingResultsSection'><td><strong>Warnings:<\/strong><\/td>",i+="<td class='codingResultsOutput'>"+n.buildWarnings[0]+"<\/td><\/tr>",u=1;u<n.buildWarnings.length;u++)i+="<tr><td><\/td><td class='codingResultsOutput'>"+n.buildWarnings[u]+"<\/td><\/tr>";i+="<\/table>",$("#buildOutput_"+t).html(i),$("#runCodingTests_"+t).text("Run code"),$("#runCodingTests_"+t).removeClass("disabled"),$("#buildOutput_"+t).show()}})}function checkRequiredSubmitQuestionsOnPage(n,t){var i=$("head base").attr("href"),r={scId:t,pageId:n};$.ajax({type:"POST",url:i+"/SC/HasRequiredUnCompletedQuestions",data:r,error:function(n){alert("error: "+n)},success:function(i){i=="True"?showPreviousNextPage(n,t,"CURRENT",!0,!0,!1):submitQuestionsOnPage(t)}})}function submitQuestionsOnPage(n){$(".surveyEditorQuestion>div>div").each(function(){var t=$(this).attr("id").replace("question_","");submitQuestion(n,t)}),$("#nextPageWithMessage").hide(),$("#submitSurveyWithMessage").hide(),$("#nextPage").show(),$("#submitSurvey").show(),$("#saveAllQuestions").attr("disabled","disabled"),$("#nextPage").removeAttr("disabled"),$("#submitSurvey").removeAttr("disabled")}function submitQuestion(n,t){var i=$("head base").attr("href"),r={scId:n,questionId:t};$.ajax({type:"POST",url:i+"/SC/SubmitQuestion",data:r,error:function(n){alert("error: "+n)},success:function(n){$("#question_"+t).parents(".surveyEditorQuestion").html(n),setQuestionFormating(n)}})}function checkRequiredQuestionsForPage(n,t,i){var r=$("head base").attr("href"),u={scId:t,pageId:n};$.ajax({type:"POST",url:r+"/SC/HasRequiredUnCompletedQuestions",data:u,error:function(n){alert("error: "+n)},success:function(r){r=="True"?showPreviousNextPage(n,t,"CURRENT",!0,!0,!1):showPreviousNextPage(n,t,i,!1,!1)}})}function showNextPage(n,t,i){$("#nextPage").attr("disabled","disabled"),showPreviousNextPage(n,t,"NEXT",i)}function showPreviousPage(n,t,i){$("#previousPage").attr("disabled","disabled"),showPreviousNextPage(n,t,"PREVIOUS",i)}function showPreviousNextPage(n,t,i,r,u,f){var e,o,s,h;typeof r=="undefined"&&(r=!1),typeof u=="undefined"&&(u=!1),typeof f=="undefined"&&(f=!0),e=$(document.activeElement).attr("onblur"),e!=null&&(o=new Function(e),o()),s={currentPageId:n,currentScId:t,pageDirection:i,highlightRequiredQuestions:r,showRequiredQuestionsDialog:u,showAllRequiredQuestions:f},h=$("head base").attr("href"),$.ajax({type:"POST",url:h+"/SC/GetPreviousNextPage",data:s,error:function(n){alert("error: "+n),i=="NEXT"?$("#nextPage").removeAttr("disabled"):$("#previousPage").removeAttr("disabled")},success:function(n){var t=$("#timeLimitBar").html();$("#currentPage").replaceWith('<div id="currentPage">'+n+"<\/div>"),$("#timeLimitBar").html(t),window.scroll(0,0),setTextAreaAutoExpand(),setQuestionFormating(n),n.indexOf("fileUploadQuestion")!=-1&&setFileUploadQuestions(),n.indexOf("applyCustomScript()")!=-1&&applyCustomScript(),u?$("#modalRequiredQuestions").modal("show"):scChangedPage()}})}function setQuestionFormating(n){n.indexOf("math-tex")!=-1&&addMathJax(),n.indexOf("<code")!=-1&&highlightCode(),n.indexOf("codeEditor")!=-1&&setCodeEditors(),(n.indexOf("fileUploadQuestion")!=-1||n.indexOf("Uploads/Files")!=-1)&&($("link[href='/Content/font-awesome-4.3.0/css/font-awesome.min.css']").length||$('<link href="/Content/font-awesome-4.3.0/css/font-awesome.min.css" rel="stylesheet">').appendTo("head"))}function scChangedPage(){"parentIFrame"in window&&(window.parentIFrame.sendMessage("changedPage"),window.parentIFrame.size(1))}function addMathJax(){if($("#containsMathJax").length)MathJax.Hub.Queue(["Typeset",MathJax.Hub]);else{var n='<div id="containsMathJax" style="display:none;"><\/div>';n+='<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"><\/script>',$("body").append(n)}}function confirmSubmitSurvey(n,t,i,r,u,f,e,o,s,h){showGenericModal(f,e,o,!0,!1,!0,"submitSurvey('"+n+"','"+t+"', '"+i+"', '"+r+"', '"+u+"')",null,!0,!0,s,h)}function submitSurvey(n,t,i,r,u){typeof t=="undefined"&&(t="True"),typeof i=="undefined"&&(i="False"),typeof r=="undefined"&&(r="00000000-0000-0000-0000-000000000000"),typeof u=="undefined"&&(u="False"),$("#submitSurvey").attr("disabled","disabled"),$("#overlay").css("visibility","visible");var o={currentSCId:n},f=$("head base").attr("href"),e="";self!==top&&(e="?f=t"),$.ajax({type:"POST",url:f+"/SC/SubmitSC"+e,data:o,error:function(n){$("#overlay").hide(),alert("error: "+n)},success:function(e){if(e=="UNCOMPLETED-QUESTIONS")$("#overlay").hide(),showPreviousNextPage(r,n,"CURRENT",!0,!0);else if(e!=""){var o=0;t!="False"&&($.ajax({type:"POST",url:f+"/SC/EmailResults/"+n}),o=200),u!="False"?($.ajax({type:"POST",url:f+"/SC/EmailResultsToRespondent/"+n}),o=o+200):i!="False"&&($.ajax({type:"POST",url:f+"/SC/EmailCertificate/"+n}),o=o+200),e=="CLOSEBROWSERWINDOW"||setTimeout(function(){window.onbeforeunload=null,scChangedPage(),window.location.href=e},o)}}})}function submitSurveyTimeLimit(n,t,i){var o={currentSCId:n},r=$("head base").attr("href"),f=$(document.activeElement).attr("onblur"),e,u;f!=null&&(e=new Function(f),e()),u="?rq=false",self!==top&&(u+="&f=t"),$.ajax({type:"POST",url:r+"/SC/SubmitSC"+u,data:o,error:function(n){alert("error: "+n)},success:function(u){$("#modelTimeLimitSubmit").modal({backdrop:"static",keyboard:!1}).one("click","#modelTimeLimitSubmitOk",function(){u!=""&&(t!="False"&&$.ajax({type:"POST",url:r+"/SC/EmailResults/"+n}),i!="False"&&$.ajax({type:"POST",url:r+"/SC/EmailCertificate/"+n}),u=="CLOSEBROWSERWINDOW"||(window.onbeforeunload=null,scChangedPage(),u.includes("w=top")?window.top.location.href=u:window.location.href=u))})}})}function saveAndContineLater(n){var t=$("head base").attr("href");window.onbeforeunload=null,scChangedPage(),window.location.href=t+"/SC/CL?scId="+n}function registerParticipant(n,t,i){var o=$("head base").attr("href"),r="",u="",f="",e,s;$(".scRegistrationItemRequired").each(function(){$.trim($(this).val())==""&&(r+="<li>"+$(this).attr("data-itemName")+"<\/li>")}),$(".scRegistrationItemTypeDropdown.scRegistrationItemRequired").each(function(){$.trim($(this).val())=="- Select -"&&(r+="<li>"+$(this).attr("data-itemName")+"<\/li>")}),$(".scRegistrationItemTypeCheckbox.scRegistrationItemRequired").each(function(){$(this).prop("checked")||(r+="<li>"+$(this).attr("data-itemName")+"<\/li>")}),$(".scRegistrationItemTypeEmail").each(function(){$.trim($(this).val())==""||isValidateEmailAddress($(this).val())||(u+="<li>"+$(this).val()+"<\/li>")}),r!=""||u!=""?($.trim(r)!=""&&(r="<p>The following details are required:<\/p><ul>"+r+"<\/ul><br />"),$.trim(u)!=""&&(u="<p>The following is not a valid email address<\/p><ul>"+u+"<\/ul>"),f="<div class='alert alert-warning' role='alert'>"+r+u+"<\/div>",$("#warningContent").html(f)):(e="",$(".scRegistrationItem").each(function(){if($(this).attr("type")=="checkbox"){var i="";$(this).is(":checked")&&(i="Yes"),e+=$(this).attr("id")+"$d(|"+i+";[)*"}else e+=$(this).attr("id")+"$d(|"+$(this).val()+";[)*"}),s={publishedSurveyId:n,registrationItems:e,publishedSurveyLinkId:t},$(".btn").prop("disabled",!0),$.ajax({type:"POST",url:o+"/SC/RegisterParticipant",data:s,error:function(n){alert("error: "+n),$(".btn").prop("disabled",!1)},success:function(n){if(n=="MATCH")f="<div class='alert alert-warning' role='alert'>Registration details have been previously used for this "+GetProductTypeLowerCase()+"<\/div>",$("#warningContent").html(f),$(".btn").prop("disabled",!1);else if(n=="PASSWORD")f="<div class='alert alert-warning' role='alert'>Incorrect password<\/div>",$("#warningContent").html(f),$(".btn").prop("disabled",!1);else{var t=o+"/SC/S?p="+n+"&rg=t";i!=""&&(t+="&"+i),scChangedPage(),window.location.href=t}}}))}function startSC(n){var t=$("head base").attr("href");window.location.href=t+"/SC/StartSC?scId="+n}function getQuestionId(n){var t;return $(".surveyEditorQuestion div[id*=question_]").each(function(){$(this).find("[id*="+n+"],[value*="+n+"]").length!=0&&(t=$(this).attr("id").replace("question_",""))}),t}function setProgressPercentage(n,t,i){var u,f,r;$(".scProgressBarPercentCompleted").length!=0&&(t==null&&(t=getQuestionId(i)),u=$("head base").attr("href"),t==null?(r={scId:n,optionId:i},$.ajax({type:"POST",url:u+"/SC/LogProgressBarResponsesOptionId",data:r})):(f=questionHasResponse(t),r={scId:n,questionId:t,hasResponse:f},$.ajax({type:"POST",url:u+"/SC/SetProgressBarResponses",data:r,success:function(n){$(".scProgressBarQuestionsCompleted").html(n.split(" ")[0]),$(".scProgressBarPercentCompleted").html(n.split(" ")[1])}})))}function questionHasResponse(n){var t=!1,i=$("#question_"+n),r;return $(i).find("input[type=radio],input[type=checkbox]").each(function(){$(this).is(":checked")&&(t=!0)}),t||(r=$(i).find("#options_"+n),$(r).val()!=null&&$(r).val().replace("option_","")!="- Select -"&&(t=!0),t||($(i).find("textarea,input[type=text]").each(function(){$.trim($(this).val())!=""&&(t=!0)}),t||($(i).find(".option-overlaySelected").each(function(){$(this).css("display")!="none"&&(t=!0)}),t||$(i).find(".fileUploadQuestionName").length!=0&&(t=!0)))),t}function reviewAnswers(n,t){$("#reviewAnswersButton").attr("disabled","disabled");var i={surveyId:n,scId:t},r=$("head base").attr("href");$.ajax({type:"POST",url:r+"/SC/GetReviewAnswers",data:i,error:function(n){alert("error: "+n),$("#reviewAnswersButton").removeAttr("disabled")},success:function(n){$("#reviewAnswersDialog .modal-body").html(n),$("#reviewAnswersDialog").modal("show"),setQuestionFormating(n),$("#reviewAnswersButton").removeAttr("disabled")}})}function reviewAnswersAsPDF(n,t){var i=$("head base").attr("href"),r=i+"/SC/GetReviewAnswersAsPDF?surveyId="+n+"&scId="+t;window.location=r}function certificateDownload(n){var t=$("head base").attr("href"),i=t+"/SC/CRTP/"+n;window.location=i}function retakeSurvey(n){var i={scId:n},t=$("head base").attr("href");$.ajax({type:"POST",url:t+"/SC/SetRetakeSurvey",data:i,error:function(n){alert("error: "+n)},success:function(n){scChangedPage(),window.location.href=t+n}})}function ie_ver(){var n=0,t=/MSIE (\d+\.\d+);/.test(navigator.userAgent),i=!!navigator.userAgent.match(/Trident\/7.0/),r=navigator.userAgent.indexOf("rv:11.0");return t&&(n=new Number(RegExp.$1)),navigator.appVersion.indexOf("MSIE 10")!=-1&&(n=10),i&&r!=-1&&(n=11),n}function isValidateEmailAddress(n){var t=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(n)}function joinWithoutSignup(){var n=$("head base").attr("href");$(".primaryHomePageBanner .col-md-6 a.btn-lg").css("width","209.09"),$(".primaryHomePageBanner .col-md-6 a.btn-lg").html('Starting <i class="fa fa-refresh fa-spin fa-3x fa-fw" style="font-size:14px;"><\/i>'),$(".primaryHomePageBanner .col-md-6 a.btn-lg").attr("disabled","disabled"),$.ajax({type:"POST",url:n+"/Account/RegisterRandomUser",success:function(t){window.location=n+"/"+t},error:function(n){alert("error: "+n)}})}function resetPassword(){var i=$("head base").attr("href"),n=$("#UserName").val(),t;isValidateEmailAddress(n)?(t={emailAddress:n},$.ajax({type:"POST",url:i+"/Account/ResetPassword",data:t,error:function(n){alert("error: "+n)},success:function(n){n=="USERISINVALID"?alert("Please enter a valid username"):alert("Password successfully reset, an email has been sent with a link for creating a new password")}})):alert("Please enter a valid email address")}function newPassword(n){var t=$("head base").attr("href"),i=$("#Password").val(),r={passwordToken:n,password:i};$.ajax({type:"POST",url:t+"/Account/NewPassword",data:r,error:function(n){alert("error: "+n)},success:function(n){n=="ERRORRESETTINGPASSWORD"?alert("There was en error resetting your password"):n=="NOTVALIDPASSWORD"?alert("Password must be at least 6 characters long"):(alert("New password successfully set"),window.location=$("#mainCompanyGroup").html()=="LMS"?t:t+"/Account/Login")}})}function optOutFromAllComms(n,t,i){var r={p:n,u:t,s:i};$.ajax({type:"POST",url:"OptOutFromAllComms",data:r,error:function(n){alert("error: "+n)},success:function(){window.location.href="NSComplete"}})}function clearCurrentStart(n){var t={scId:n};$.ajax({type:"POST",url:"/SC/CCS",data:t})}function setCurrentStart(n){var t={scId:n};$.ajax({type:"POST",url:"/SC/SCS",data:t})}function setHeaderForTitleAndLogo(){var t=$(".surveyNameBackground").height()-75,i=$(".scContentContainer").css("background-color"),n=$(".scContentContainer").css("border-color"),r="padding-top:"+t+"px";$(".scContentContainer").attr("style",r),$(".scContentContainer").css("background-color",i),n!=""&&$(".scContentContainer").css("border-color",n)}function selectedFileUploadQuestions(n){var i=getCurrentSCId(),r="browseFiles_"+n,u="selectFiles"+n,t;GetFileSize(r)<=20971520?(document.getElementById("uploading_"+n).style.display="block",t="selectedFilesUploaded('"+i+"', '"+n+"');",$("#browseFilesSelected-"+n).attr("onload",t),document.forms[u].submit()):alert("Maximum file size is 20MB")}function selectedFilesUploaded(n,t){$.ajax({url:"/SC/GetFileUploads?scId="+n+"&oid="+t,method:"post",error:function(n){alert("error: "+n)},success:function(n){n!=null&&($("#option_"+t).replaceWith(n),setFileUploadQuestions("option_"+t))}})}function GetFileSize(n){var t;try{if(t=0,$.browser.msie)var i=new ActiveXObject("Scripting.FileSystemObject"),r=$("#"+n)[0].value,u=i.getFile(r),t=u.size;else t=$("#"+n)[0].files[0].size}catch(f){alert("Error is :"+f)}return t}function setFileUploadQuestions(n){$(document).ready(function(){jQuery.event.props.push("dataTransfer");var t=".fileUploadQuestion";typeof n!="undefined"&&n!=""&&(t="#"+n+".fileUploadQuestion"),$(t).bind("drop",function(n){var i,u,f,e,r,o,t;if(n.preventDefault(),$("#"+n.currentTarget.id).css("background-color","#f8f8f8"),i=n.originalEvent.dataTransfer.files,u=$("#"+n.currentTarget.id+" .fileUploadQuestionName").size(),u+=i.length,u>10)alert("Maximum of 10 files can be uploaded to a question");else{for(f=!1,t=0;t<i.length;t++)if(i[t].size>20971520){f=!0;break}if(f)alert("Maximum file size is 20MB");else{for(e=getCurrentSCId(),r=n.currentTarget.id.substr(n.currentTarget.id.length-36),document.getElementById("uploading_"+r).style.display="block",o=new FormData,t=0;t<i.length;t++)o.append("file"+t,i[t]);$.ajax({url:"/SC/SaveFileUploads?scId="+e+"&oid="+r,method:"post",data:o,processData:!1,contentType:!1,error:function(n){alert("error: "+n)},success:function(t){t!=null&&($("#"+n.currentTarget.id).replaceWith(t),setFileUploadQuestions(n.currentTarget.id)),setProgressPercentage(e,null,r)}})}}}),$(t).bind("dragover",function(n){$("#"+n.currentTarget.id).css("background-color","#f2f2f2")}),$(t).bind("dragleave",function(n){$("#"+n.currentTarget.id).css("background-color","#f8f8f8")})})}function deleteFileUpload(n,t){var i=$("#fileId_"+n).html(),r={fileId:i};$.ajax({url:"/SC/DeleteFileUpload",method:"post",data:r,error:function(n){alert("error: "+n)},success:function(){$("#file_"+n).remove();var r=getCurrentSCId();setProgressPercentage(r,null,t)}})}function highlightCode(){$("link[href='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css']").length||$('<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet">').appendTo("head"),$("script[src='https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js']").length?$(document).ready(function(){$("pre code").each(function(n,t){hljs.highlightBlock(t),$("pre:has(code)").css("background","#F0F0F0")})}):($('<script id="highlightJS" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"><\/script>').appendTo("body"),$.holdReady(!0),$.getScript("https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js",function(){$("pre code").each(function(n,t){hljs.highlightBlock(t),$("pre:has(code)").css("background","#F0F0F0")}),$.holdReady(!1)}))}function setCodeEditors(n){typeof n=="undefined"&&(n=!1),$("script[src='https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/ace.js']").length?setCodeEditorsProperties():($('<script id="aceEditor" src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/ace.js"><\/script>').appendTo("body"),$.holdReady(!0),$.getScript("https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.9/ace.js",function(){setCodeEditorsProperties(),$.holdReady(!1)}))}function setCodeEditorsProperties(n){$(".codeEditor").each(function(){var i=ace.edit(this);if(i.setTheme("ace/theme/github"),i.getSession().setMode("ace/mode/csharp"),i.setShowPrintMargin(!1),i.setAutoScrollEditorIntoView(!0),i.setOption("minLines",20),i.setOption("maxLines",1e3),n)i.setOptions({maxLines:Infinity});else{i.on("blur",function(){var n=i.container.id;n=n.replace("option_",""),saveAnswer(n,"coding")});$(".codingArea").css("height","auto")}})}function GSCS(n,t,i,r,u){var f=$("#presetDiscountCode input").val();$.ajax({url:"/SC/GSCS?surveyId="+i+"&scId="+r+"&dc="+f+"&scUrl="+u,method:"GET",error:function(n){alert("error: "+n)},success:function(i){var r=Stripe(n,{stripeAccount:t});r.redirectToCheckout({sessionId:i}).then(function(n){alert(n.error.message)})}})}function setTextAreaAutoExpand(){$("textarea.autoExpand").each(function(){var i=this.value,n,t;this.value="",this.baseScrollHeight=this.scrollHeight,this.value=i,n=this.getAttribute("data-min-rows")|0,this.rows=n,t=Math.ceil((this.scrollHeight-this.baseScrollHeight)/20),this.style.height="auto",this.style.height=this.scrollHeight+2+"px",this.rows=n+t});$(document).one("focus.textarea",".autoExpand",function(){var n=this.rows,t=this.getAttribute("data-min-rows")|0,i;this.rows=t,this.baseScrollHeight=this.clientHeight,this.rows=n}).on("input.textarea",".autoExpand",function(){var n=this.getAttribute("data-min-rows")|0,t;this.rows=n,t=Math.ceil((this.scrollHeight-this.baseScrollHeight)/20),this.style.height="auto",this.style.height=this.scrollHeight+2+"px",this.rows=n+t})}function getCurrentSCId(){var n=$.trim($("#currentSCId").html());return n.length>36&&(n=$(n).text().replace(" ","")),n}function GetProductTypeLowerCase(){return"quiz"}function showGenericModal(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){typeof c=="undefined"&&(c=""),typeof l=="undefined"&&(l=""),typeof a=="undefined"&&(a=!0),typeof v=="undefined"&&(v=!0),typeof y=="undefined"&&(y="GENERIC"),$("#modalGenericText").html(n),$("#modalGenericButton1").html(t),$("#modalGenericButton2").html(i),$("#modalGenericButton1").prop("disabled",!1),$("#modalGenericButton2").prop("disabled",!1),t==""?$("#modalGenericButton1").hide():$("#modalGenericButton1").show(),i==""?$("#modalGenericButton2").hide():$("#modalGenericButton2").show(),$("#modalGenericButton1").removeClass(),$("#modalGenericButton1").addClass("btn"),c!=""?$("#modalGenericButton1").addClass("btn-"+c):r&&$("#modalGenericButton1").addClass("btn-primary"),$("#modalGenericButton2").removeClass(),$("#modalGenericButton2").addClass("btn"),l!=""?$("#modalGenericButton2").addClass("btn-"+l):u&&$("#modalGenericButton2").addClass("btn-primary"),a==!0?$("#modalGenericButton1").attr("data-dismiss","modal"):$("#modalGenericButton1").removeAttr("data-dismiss"),v==!0?$("#modalGenericButton2").attr("data-dismiss","modal"):$("#modalGenericButton2").removeAttr("data-dismiss"),f?$("#modalGenericCloseButton").show():$("#modalGenericCloseButton").hide(),e!=null?$("#modalGenericButton1").attr("onclick",e):$("#modalGenericButton1").removeAttr("onclick"),o!=null?$("#modalGenericButton2").attr("onclick",o):$("#modalGenericButton2").removeAttr("onclick"),s==!0?$("#modalGenericButton1").show():$("#modalGenericButton1").hide(),h==!0?$("#modalGenericButton2").show():$("#modalGenericButton2").hide(),$("#modalGeneric").css("z-index","9999"),$("#modalGeneric").modal({backdrop:"static",keyboard:!1})}function startCountDown(n,t,i,r){var o=document.getElementById("countDown"),e,u,f,s=+new Date,l=+new Date(s+t*1e3),h,c;o!=null&&(h=function(){if(o=document.getElementById("countDown"),t<=0)o.innerHTML="0:00:00",clearInterval(c),submitSurveyTimeLimit(n,i,r);else{t--;var h=+new Date;h-s>1500&&(expectedStartTime=Math.round((l-h)/1e3),expectedStartTime+2<t&&(t=expectedStartTime)),s=h,t>0&&(e=parseInt(t/3600),u=parseInt((t-e*3600)/60),f=t-(e*3600+u*60),f==60&&(f=0,u+=1),u==60&&(u=0,e+=1),u=u<10?"0"+u:u,f=f<10?"0"+f:f,o.innerHTML=e+":"+u+":"+f)}},c=setInterval(h,1e3))}function startPageCountDown(n,t,i,r){var l=document.getElementById("pageCountDown"),e,u,f,o,s,h,c;l!=null&&(h=function(){var a=document.getElementById("pageCountDown"),h=$("#initialPageTimeRemaining").val(),l,v,y;h!=""&&h>=0&&(t=h,o=+new Date,s=+new Date(o+t*1e3),$("#initialPageTimeRemaining").val("")),l=+new Date,l-o>1500&&(v=Math.round((s-l)/1e3),v+2<t&&(t=v)),o=l,h=="-1"?a.innerHTML="unlimited":t<=0?(a.innerHTML="0:00:00",y=$("#currentPageId").val(),$("#nextPage").length?($("#modelPageTimeLimitExpired").modal("show"),showNextPage(y,n)):$("#previousPage").length?showPreviousPage(y,n):(clearInterval(c),submitSurveyTimeLimit(n,i,r))):(t--,e=parseInt(t/3600),u=parseInt((t-e*3600)/60),f=t-(e*3600+u*60),f==60&&(f=0,u+=1),u==60&&(u=0,e+=1),u=u<10?"0"+u:u,f=f<10?"0"+f:f,a.innerHTML=e+":"+u+":"+f)},c=setInterval(h,1e3))}